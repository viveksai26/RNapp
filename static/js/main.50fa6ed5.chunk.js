(this.webpackJsonpdiscuss=this.webpackJsonpdiscuss||[]).push([[0],{41:function(e,t,n){e.exports=n(56)},46:function(e,t,n){},47:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),m=n(15),s=n.n(m),i=(n(46),n(14)),c=n(27),l=n(28),r=n(39),u=n(30),h=n(40),p=(n(47),n(48),n(62)),d=n(59),f=n(61),g=n(63),v=n(64),E=n(60),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).handleName=function(e){n.setState({name:e.target.value}),localStorage.setItem("name",e.target.value)},n.handleComment=function(e){n.setState({comment:e.target.value})},n.getComments=function(){if(console.log(n.state.comments),0!==n.state.comments.length){var e=n.getFormattedTimeStamp(n.state.comments?n.state.comments.slice(-1).pop().timestamp:null);fetch("/getComments",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:e,question_id:n.props.match.params.id})}).then((function(e){return e.json()})).then((function(e){n.setState({comments:[].concat(Object(i.a)(n.state.comments),Object(i.a)(e[0]))})}))}},n.createComment=function(){fetch("createComment",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:n.state.comment,question_id:n.props.match.params.id,commentName:n.state.name})}).then((function(e){return e.json()})).then(n.getComments())},n.state={question:"",name:"",comments:[],postComment:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Date,n=t.toLocaleString().replace(/[/]/g,"-").replace(/[,]/g,""),a=n.slice(6,10)+"-"+n.slice(0,2)+"-"+n.slice(3,5)+" "+t.toString().slice(16,25);this.getQuestion(),this.initialComments(a),this.getName(),setInterval((function(){e.getComments()}),3e3)}},{key:"getName",value:function(){this.setState({name:localStorage.getItem("name")})}},{key:"getQuestion",value:function(){var e=this;fetch("/getQuestion/"+this.props.match.params.id).then((function(e){return e.json()})).then((function(t){t.length&&e.setState({question:t[0][0].question})}))}},{key:"initialComments",value:function(e){var t=this;console.log(this.state.comments),"old"===e?0!==this.state.comments.length&&(e=this.getFormattedTimeStamp(this.state.comments[0].timestamp),fetch("/initialComments",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:e,question_id:this.props.match.params.id})}).then((function(e){return e.json()})).then((function(e){t.setState({comments:[].concat(Object(i.a)(e[0].reverse()),Object(i.a)(t.state.comments))})}))):fetch("/initialComments",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:e,question_id:this.props.match.params.id})}).then((function(e){return e.json()})).then((function(e){t.setState({comments:e[0].reverse()})}))}},{key:"getFormattedTimeStamp",value:function(e){var t=new Date(e),n=t.toLocaleString().replace(/[/]/g,"-").replace(/[,]/g,"");return n.slice(6,10)+"-"+n.slice(0,2)+"-"+n.slice(3,5)+" "+t.toString().slice(16,25)}},{key:"render",value:function(){var e=this,t=this.state.comments.map((function(e,t){return o.a.createElement(p.a.Item,{key:e.commentId},e.commentName," : ",e.comment," ")}));return o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement(f.a.Brand,{href:"#home"},"DISK"),o.a.createElement(f.a.Toggle,null),o.a.createElement(f.a.Collapse,{className:"justify-content-end"})),o.a.createElement(g.a,null,o.a.createElement(g.a.Body,null,o.a.createElement(g.a.Title,null,"Question"),o.a.createElement(g.a.Text,null,this.state.question))),o.a.createElement(g.a,null,o.a.createElement(g.a.Body,null,o.a.createElement(g.a.Title,null,"Discussion"),o.a.createElement(v.a,{variant:"light",onClick:function(){e.initialComments("old")}},"Load Previous"),o.a.createElement(p.a,{variant:"flush"},t))),o.a.createElement(g.a,null,o.a.createElement(g.a.Body,null,o.a.createElement(E.a,null,o.a.createElement(E.a.Group,{controlId:"formBasicName"},o.a.createElement(E.a.Label,null,"Name"),o.a.createElement(E.a.Control,{size:"sm",type:"text",value:this.state.name,onChange:this.handleName,placeholder:"YourName"})),o.a.createElement(E.a.Group,{controlId:"formBasicComment"},o.a.createElement(E.a.Label,null,"Add your comment below"),o.a.createElement(E.a.Control,{value:this.state.comment,onChange:this.handleComment,as:"textarea",rows:"3"}),o.a.createElement(E.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),o.a.createElement(v.a,{variant:"primary",onClick:this.createComment},"Submit"),o.a.createElement(v.a,{variant:"light",onClick:function(){e.getComments()}},"Refresh")))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=n(36),S=n(11),b=function(){return o.a.createElement("h1",null,"Not found")},j=o.a.createElement(C.a,null,o.a.createElement("div",null,o.a.createElement(S.c,null,o.a.createElement(S.a,{exact:!0,path:"/:id",component:y}),o.a.createElement(S.a,{component:b}))));s.a.render(j,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.50fa6ed5.chunk.js.map